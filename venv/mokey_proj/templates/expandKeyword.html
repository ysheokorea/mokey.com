{% extends 'base.html' %}
{% load static %}
{% load humanize %}


{% block content %}

<div class="d-flex flex-row justify-content-around">
    <div class="ads_panel_side px-5 bg-primary" style="width: 30%; height: 700px; margin-top:5%;">
        <h3 class="text-center">Ads</h3>
    </div>
    <style>
        .ads_panel_side {
            position: sticky;
            top: 10%;
            z-index: 100;
        }
    </style>

    <main role="main" class="inner cover text-center mb-5 pb-5" id="process_before">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">키워드확장</li>
            </ol>
        </nav>
        <style>
            .no-display {
                display: none;
            }
        </style>
        <div class="row ads_panel_main bg-primary">
            <h3 class="text-center">Ads</h3>
        </div>
        <div class="d-flex flex-column w-100">
            <div class="row my-3" id="expand_keyword_bx">
                <div class="col">
                    <div class="form-group d-flex flex-row justify-content-center">
                        <input type="text" name="search_keyword" id="expand_search_keyword" class="form-control"
                            placeholder="키워드를 입력하세요" aria-label="키워드를 입력하세요" aria-describedby="basic-addon2"
                            style="width:50%;" />
                        <button type="submit" id="expand_recomm_keywords" class="btn btn-primary">키워드 확장하기</button>
                    </div>
                </div>
            </div>
            <style>
                #expand_keyword_bx {
                    position: sticky;
                    top: 0;
                    z-index: 100;
                    /* margin-top:10px; */
                }
            </style>
            <div class="d-flex flex-column justify-content-center align-middle">
                <div class="spinner-border text-secondary mx-auto mb-5" role="status" id="spinner"
                    style="margin-top:50px; width:100px; height:100px; border-width:10px; display:none;">
                    <span class="sr-only">Loading...</span>
                </div>
                <div id="spinner_info">
                    <h3>키워드를 확장 중입니다</h3>
                    <h4 class="text-muted">이 작업은 1~2분 소요됩니다</h4>
                </div>
                <div class="progress mx-auto" id="expand_keyword_progress_div" style="width:500px; height:50px;">
                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                        aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%; height: 100%;" id="expand_keyword_progress"></div>
                </div>
            </div>
            <div class="row my-2 text-center" id="expandKeyword_content" style="display:none;">
                <div class="alert alert-success mb-3" role="alert">
                    <div style="font-size:20px;" id="expandKeyword_keyword">
                        <!-- javascript -->
                    </div>
                </div>
            </div>
            <div class="row my-1">
                <div class="col" id="recommend_keywords_pc" style="display:none;">
                    <div class="text-right mr-3" data-toggle="tooltip" data-placement="top" title="csv 다운로드"
                        id="expand_csv_btn"></div>
                    <script>
                        $(function () {
                            $('[data-toggle="tooltip"]').tooltip()
                        })
                    </script>
                    <table class="table table-striped table-bordered table-hover table-sm">
                        <thead class="table">
                            <tr>
                                <th style="font-size:70%; width:5%; vertical-align:middle;">#</th>
                                <th style="font-size:70%; width:40%; vertical-align:middle;">키워드</th>
                                <th style="font-size:70%; width:10%;">PC 검색량<br>(월)</th>
                                <th style="font-size:70%; width:10%;">Mobie 검색량<br>(월)</th>
                                <th style="font-size:70%; width:10%;">블로그 발행량<br>(전체))</th>
                                <th style="font-size:70%; width:10%;">키워드<br>품질</th>
                            </tr>
                        </thead>
                        <tbody id="expandRelkeyword_table">
                            <!-- javascript -->
                        </tbody>
                    </table>
                </div>
                <div class="col" id="recommend_keywords_mobile">
                    <table class="table table-striped table-bordered table-hover table-sm">
                        <thead class="table-dark">
                            <tr>
                                <th style="font-size:70%; width:5%">#</th>
                                <th style="font-size:70%; width:40%; vertical-align:middle;">키워드</th>
                                <th style="font-size:70%; width:10%;">키워드<br>품질</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for list in recomm_lists %}
                            <tr>
                                <th scope="row">{{ forloop.counter }}</th>
                                <td><strong>{{ list.keyword }}</strong></td>
                                <td><strong style="color:red;">{{list.kwQuality}}</strong></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <script src="{% static 'expandKeyword.js' %}"></script>
    </main>

    <div class="ads_panel_side px-5 bg-primary" style="width: 30%; height: 700px; margin-top:5%;">
        <h3 class="text-center">Ads</h3>
    </div>
</div>


{% endblock %}